---
title: "Next.js 15 æ–°ç‰¹æ€§è¯¦è§£"
excerpt: "æ¢ç´¢Next.js 15å¸¦æ¥çš„æ–°åŠŸèƒ½å’Œæ”¹è¿›ï¼ŒåŒ…æ‹¬App Routerçš„å¢å¼ºã€æ€§èƒ½ä¼˜åŒ–ã€ä»¥åŠå¼€å‘è€…ä½“éªŒçš„æå‡ã€‚äº†è§£å¦‚ä½•åœ¨é¡¹ç›®ä¸­å……åˆ†åˆ©ç”¨è¿™äº›æ–°ç‰¹æ€§ã€‚"
date: "2024-01-10"
slug: "nextjs-15-features"
published: true
---

# Next.js 15 æ–°ç‰¹æ€§è¯¦è§£

Next.js 15 æ˜¯ä¸€ä¸ªé‡è¦çš„ç‰ˆæœ¬æ›´æ–°ï¼Œå¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢è¿™äº›æ–°åŠŸèƒ½ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•æå‡æˆ‘ä»¬çš„å¼€å‘ä½“éªŒã€‚

## ğŸš€ ä¸»è¦æ–°ç‰¹æ€§

### 1. React 19 æ”¯æŒ

Next.js 15 å®Œå…¨æ”¯æŒ React 19ï¼ŒåŒ…æ‹¬ï¼š

- **Server Components** çš„è¿›ä¸€æ­¥ä¼˜åŒ–
- **Concurrent Features** çš„å¢å¼º
- æ›´å¥½çš„ **Hydration** æ€§èƒ½

```tsx
// React 19 çš„æ–°ç‰¹æ€§ç¤ºä¾‹
import { use } from 'react';

function UserProfile({ userPromise }) {
  const user = use(userPromise); // æ–°çš„ use Hook
  
  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.email}</p>
    </div>
  );
}
```

### 2. Turbopack ç¨³å®šç‰ˆ

Turbopack ç°åœ¨è¿›å…¥ç¨³å®šé˜¶æ®µï¼Œæä¾›ï¼š

- âš¡ **10x æ›´å¿«**çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨å¯åŠ¨
- ğŸ”„ **æ›´å¿«çš„çƒ­é‡è½½**ä½“éªŒ
- ğŸ“¦ **æ›´é«˜æ•ˆçš„æ‰“åŒ…**è¿‡ç¨‹

```bash
# å¯ç”¨ Turbopack
npm run dev --turbo
```

### 3. å¢å¼ºçš„ App Router

#### å¹¶è¡Œè·¯ç”± (Parallel Routes)

```tsx
// app/dashboard/@team/page.tsx
export default function TeamDashboard() {
  return <div>å›¢é˜Ÿæ•°æ®</div>;
}

// app/dashboard/@analytics/page.tsx  
export default function Analytics() {
  return <div>åˆ†ææ•°æ®</div>;
}

// app/dashboard/layout.tsx
export default function Layout({
  children,
  team,
  analytics,
}: {
  children: React.ReactNode;
  team: React.ReactNode;
  analytics: React.ReactNode;
}) {
  return (
    <div>
      {children}
      <div className="grid grid-cols-2 gap-4">
        {team}
        {analytics}
      </div>
    </div>
  );
}
```

#### æ‹¦æˆªè·¯ç”± (Intercepting Routes)

```tsx
// app/photos/(..)photo/[id]/page.tsx
// æ‹¦æˆª /photo/[id] è·¯ç”±
export default function PhotoModal({ params }: { params: { id: string } }) {
  return (
    <div className="modal">
      <img src={`/api/photos/${params.id}`} alt="Photo" />
    </div>
  );
}
```

## ğŸ› ï¸ å¼€å‘ä½“éªŒæ”¹è¿›

### 1. æ”¹è¿›çš„é”™è¯¯å¤„ç†

```tsx
// app/error.tsx
'use client';

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  return (
    <div className="error-boundary">
      <h2>å‡ºç°äº†é”™è¯¯ï¼</h2>
      <p>{error.message}</p>
      <button onClick={reset}>é‡è¯•</button>
    </div>
  );
}
```

### 2. å¢å¼ºçš„ TypeScript æ”¯æŒ

- æ›´å¥½çš„ç±»å‹æ¨æ–­
- æ”¹è¿›çš„ IDE é›†æˆ
- æ›´å‡†ç¡®çš„é”™è¯¯æç¤º

### 3. æ–°çš„é…ç½®é€‰é¡¹

```typescript
// next.config.js
const nextConfig = {
  experimental: {
    // æ–°çš„å®éªŒæ€§åŠŸèƒ½
    ppr: true, // Partial Prerendering
    reactCompiler: true, // React Compiler
  },
  // æ–°çš„å›¾ç‰‡ä¼˜åŒ–é€‰é¡¹
  images: {
    formats: ['image/avif', 'image/webp'],
    minimumCacheTTL: 60,
  },
};
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. éƒ¨åˆ†é¢„æ¸²æŸ“ (Partial Prerendering)

è¿™æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„åŠŸèƒ½ï¼Œå…è®¸é¡µé¢çš„ä¸€éƒ¨åˆ†é™æ€æ¸²æŸ“ï¼Œä¸€éƒ¨åˆ†åŠ¨æ€æ¸²æŸ“ï¼š

```tsx
import { Suspense } from 'react';

export default function ProductPage() {
  return (
    <div>
      {/* é™æ€éƒ¨åˆ† */}
      <header>äº§å“ä¿¡æ¯</header>
      
      {/* åŠ¨æ€éƒ¨åˆ† */}
      <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
        <DynamicUserContent />
      </Suspense>
    </div>
  );
}
```

### 2. æ”¹è¿›çš„å›¾ç‰‡ä¼˜åŒ–

- æ”¯æŒ AVIF æ ¼å¼
- æ›´æ™ºèƒ½çš„æ‡’åŠ è½½
- æ›´å¥½çš„å ä½ç¬¦ç”Ÿæˆ

## ğŸ”§ è¿ç§»æŒ‡å—

### ä» Next.js 14 å‡çº§

1. **æ›´æ–°ä¾èµ–**ï¼š
```bash
npm install next@15 react@19 react-dom@19
```

2. **æ£€æŸ¥é…ç½®**ï¼š
```typescript
// ç§»é™¤å·²åºŸå¼ƒçš„é€‰é¡¹
const nextConfig = {
  // experimental.appDir å·²ç§»é™¤
  // experimental.serverComponentsExternalPackages å·²é‡å‘½å
};
```

3. **æ›´æ–°ä»£ç **ï¼š
- æ£€æŸ¥ React 19 çš„ç ´åæ€§å˜æ›´
- æ›´æ–° TypeScript ç±»å‹
- æµ‹è¯•æ–°çš„æ¸²æŸ“è¡Œä¸º

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å……åˆ†åˆ©ç”¨ Server Components

```tsx
// åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­ç›´æ¥è®¿é—®æ•°æ®åº“
async function BlogPost({ slug }: { slug: string }) {
  const post = await getPost(slug); // ç›´æ¥æ•°æ®åº“æŸ¥è¯¢
  
  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  );
}
```

### 2. åˆç†ä½¿ç”¨ç¼“å­˜

```tsx
import { unstable_cache } from 'next/cache';

const getCachedPosts = unstable_cache(
  async () => {
    return await fetchPosts();
  },
  ['posts'],
  { revalidate: 3600 } // 1å°æ—¶ç¼“å­˜
);
```

## ğŸ”® æœªæ¥å±•æœ›

Next.js 15 ä¸ºæœªæ¥çš„å‘å±•å¥ å®šäº†åšå®åŸºç¡€ï¼š

- **React Server Components** çš„è¿›ä¸€æ­¥å‘å±•
- **Edge Runtime** çš„å®Œå–„
- **AI é›†æˆ**åŠŸèƒ½çš„æ¢ç´¢
- **Web Assembly** æ”¯æŒçš„å¢å¼º

## æ€»ç»“

Next.js 15 æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„ç‰ˆæœ¬ï¼Œå®ƒä¸ä»…æå‡äº†æ€§èƒ½ï¼Œè¿˜æ”¹å–„äº†å¼€å‘ä½“éªŒã€‚æ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼Œè¿™äº›æ–°ç‰¹æ€§éƒ½å€¼å¾—ä½ å»æ¢ç´¢å’Œä½¿ç”¨ã€‚

ç«‹å³å‡çº§åˆ° Next.js 15ï¼Œä½“éªŒæ›´å¿«ã€æ›´å¼ºå¤§çš„ React å¼€å‘ï¼

---

*æœ¬æ–‡æŒç»­æ›´æ–°ä¸­ï¼Œæ›´å¤šç‰¹æ€§è¯¦è§£æ•¬è¯·æœŸå¾…ã€‚* 